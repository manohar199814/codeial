{let e=function(){let e=$("#new-post-form");e.submit((n=>{n.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:e=>{let n=o(e.data.post);$("#post-list-container>ul").prepend(n),$("#new-post-form")[0][0].value="",l($(" .delete-post-button",n)),t($(" form",n)),r(e.success,null)},error:e=>{r(null,e.responseText)}})}))},t=function(e){e.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/comment/create",data:$(this).serialize(),success:e=>{let t=n(e.data.comment);$(this)[0][0].value="",$(`#post-comments-${e.data.comment.post}`).prepend(t),s($(" .delete-comment-button",t)),r(e.success,null)},error:e=>{r(null,e.responseText)}})}))},n=function(e){return $(`<li id="comment-${e._id}">\n        <p>\n            <small>\n                <a class="delete-comment-button" href="/comment/destroy/${e._id}">X</a>\n            </small>   \n            ${e.content}\n            <br>\n            <small>\n                ${e.user.name}\n            </small>\n        </p>\n        </li>`)},s=function(e){$(e).click((t=>{t.preventDefault(),$.ajax({type:"get",url:$(e).attr("href"),success:e=>{$(`#comment-${e.data.comment_id}`).remove(),r(e.success,null)},error:e=>{r(null,e.responseText)}})}))},o=function(e){return $(`<li id="post-${e._id}"> \n        <p>\n            <small>\n                <a class="delete-post-button" href="/posts/destroy/${e._id}">X</a>\n            </small>\n            ${e.content}\n            <br>\n            <small>\n                ${e.user.name}\n            </small>\n        </p>\n    \n        <div class="post-comments">\n            <form action="/comment/create" id="new-comment-form" method="POST">\n                <textarea name="content" id="" cols="30" rows="2" placeholder="Type here...." required></textarea>\n                <input type="hidden" name="post" value="${e._id}">\n                <input type="submit" value="Add Comment">\n            </form>\n    \n            <div class="post-comment-list">\n                <ul id="post-comments-${e._id}">\n    \n    \n                </ul>\n            </div>\n        </div>\n        \n    </li>\n    `)},l=function(e){$(e).click((t=>{t.preventDefault(),$.ajax({type:"get",url:$(e).attr("href"),success:e=>{$(`#post-${e.data.post_id}`).remove(),r(e.success,null)},error:e=>{r(null,e.responseText)}})}))},r=function(e,t){e&&e.length>0&&new Noty({theme:"relax",text:e,type:"success",layout:"topRight",timeout:1500}).show(),t&&t.length>0&&new Noty({theme:"relax",text:t,type:"error",layout:"topRight",timeout:1500}).show()};(function(){let e=$(".delete-post-button");for(deleteLink of e)l(deleteLink)})(),e()}